<dom-module id="covers-new">

  <style>

    paper-button[raised].colorful {
      background: #4285f4;
      color: #fff;
      @apply(--layout-vertical --layout-center-center);
    }

    [card] {
      width: 600px;
      margin: 16px auto;
      padding: 16px;
      @apply(--layout-vertical --layout-center-center);
    }

    [centerButton] {
      text-align: center;
      padding: 16px;
    }
  </style>

  <template>
    <iron-ajax id="my_iron" url="/categories" handle-as="json" on-response="handleResponse"></iron-ajax>

          <template is="dom-repeat" items="{{onlineItems}}">
            <paper-material card elevation="1">
            <div on-click="open_me">
              <span style="font-size: 12px; color: grey; ">{{item.description}}</span><br>
              <span style="font-size: 16px;">{{item.content}}</span><br>
    						<span style="font-size: 12px; color: grey; ">{{item.language}}</span><br>
                <span style="font-size: 12px; color: grey; ">{{item.tags}}</span><br>
              <span style="font-size: 12px; color: grey; ">{{item.pieces}}</span><br>
          </div>
            </paper-material>
          </template>
       </table>

       <div centerButton>
           <paper-button tabindex="0" raised class="colorful" on-click="open_empty">empty</paper-button>
       </div>

  </template>
</dom-module>

<script>
  (function () {
    Polymer({

      is: 'covers-new',
      properties: {
      },

      ready: function() {
        console.log('template-list. I am ready');
        this.$.my_iron.generateRequest();
      },

      open_me: function(e) {
        var model = e.model;
        var id = model.item.id;
        console.log('the id is', id);
        window.location = '#!/covers/new/' + String(id);
        window.location.reload();
        //model.set('item.ordered', model.item.ordered+1);
      },

      open_empty: function(e) {
        console.log('To new !!');
        window.location = '#!/covers/new/empty';
        window.location.reload();
      },

      handleResponse:function(response){
        console.log(response.detail.response);
        this.onlineItems = response.detail.response;
      }

    });
  })();
</script>
